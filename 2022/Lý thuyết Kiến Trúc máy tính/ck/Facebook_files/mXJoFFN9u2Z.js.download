;/*FB_PKG_DELIM*/

__d("LSSetMessengerRestrict",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(e){return c.seq([function(b){return c.fe(c.ftr(c.db.table(7).fetch([[[a[0]]]]),function(b){return c.i64.eq(b.id,a[0])&&c.i64.eq(c.i64.cast([0,1]),c.i64.cast([0,1]))}),function(b){var c=b.update;b.item;return c({pendingMessengerRestrictAction:a[1]})})},function(e){return d[0]=new c.Map(),d[0].set("restrictee_id",a[0]),d[0].set("request_id",a[2]),d[0].set("messenger_restrict_action",a[1]),d[1]=c.toJSON(d[0]),c.sp(b("LSIssueNewTask"),"messenger_restrict",c.i64.cast([0,367]),d[1],f,f,c.i64.cast([0,0]),c.i64.cast([0,0]),f,f,c.i64.cast([0,0]))}])},function(a){return c.resolve(e)}])}c=a;f["default"]=c}),66);
__d("LSIssueBotsInfoFetch",["LSIssueNewTaskAndGetTaskID"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(e){return d[0]=new c.Map(),d[0].set("thread_key",a[0]),c.i64.gt(c.i64.cast([0,0]),c.i64.cast([0,0]))?(d[4]=c.i64.of_float(Date.now()),d[1]=c.i64.add(d[4],c.i64.cast([0,0]))):d[1]=c.i64.cast([0,0]),d[2]=c.toJSON(d[0]),c.sp(b("LSIssueNewTaskAndGetTaskID"),"fetch_bot_info",c.i64.cast([0,571]),d[2],f,f,c.i64.cast([0,0]),c.i64.cast([0,0]),f,f,d[1]).then(function(a){return a=a,d[3]=a[0],a})},function(a){return c.resolve(e)}])}c=a;f["default"]=c}),66);
__d("LSUpdateThreadImage",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(e){return c.seq([function(b){return c.fe(c.ftr(c.db.table(9).fetch([[[a[0]]]]),function(b){return c.i64.eq(b.threadKey,a[0])&&c.i64.eq(b.threadType,c.i64.cast([0,2]))}),function(b){var d=b.update;b.item;return d({authorityLevel:c.i64.cast([0,60]),threadPictureUrl:a[2]===""?f:a[2],threadPictureUrlFallback:a[3],threadPictureUrlExpirationTimestampMs:a[4]})})},function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[0]=c.i64.cast([0,1]):(b=a.item,d[5]=b.syncGroup,c.i64.neq(d[5],f)?d[4]=d[5]:d[4]=c.i64.cast([0,1]),d[0]=d[4])})},function(e){return d[2]=new c.Map(),d[2].set("thread_key",a[0]),d[2].set("image_id",a[1]),d[2].set("sync_group",d[0]),d[3]=c.toJSON(d[2]),c.sp(b("LSIssueNewTask"),"thread_image",c.i64.cast([0,37]),d[3],f,f,c.i64.cast([0,0]),c.i64.cast([0,0]),f,f,c.i64.cast([0,0]))}])},function(a){return c.resolve(e)}])}c=a;f["default"]=c}),66);
__d("MWRestrictDialogActionToggle.react",["nux:89","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=b("nux:89")==null?void 0:b("nux:89")("web_msgr_restrict_first_time_nux");function a(a){var b=a.children;a=a.dialogProps;if(i!=null&&!a.isRestricted)return h.jsx(i,{dialogProps:a,children:function(a,c){return b(a)}});else return b(a.onPress)}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useMWMessengerResetBlockOrRestrictWC",["I64","Promise","ReQL","WebStorage","getWarningCardStorageKey","promiseDone","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useMemo;function i(a){var d=c("WebStorage").getLocalStorage();if(d==null)return;a=a.then(function(a){a.forEach(function(a){a=c("getWarningCardStorageKey")(a);return d.removeItem(a)});return b("Promise").resolve()});c("promiseDone")(a)}function a(){var a=c("useReStore")();return h(function(){return function(b){return i(d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.table("participants")).filter(function(a){return d("I64").equal(a.contactId,b)}).map(function(a){return a.threadKey})))}},[a])}g["default"]=a}),98);
__d("useMWLSMessengerRestrict",["I64","Int64Hooks","LSContactMessengerRestrictAction","LSFactory","LSIntEnum","LSMessagingThreadTypeUtil","LSSetMessengerRestrict","cr:3900","promiseDone","requireDeferred","useMWMessengerResetBlockOrRestrictWC","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("MessengerWellbeingRestrictFailedFalcoEvent").__setRef("useMWLSMessengerRestrict"),i=c("requireDeferred")("MessengerWellbeingRestrictSucceededFalcoEvent").__setRef("useMWLSMessengerRestrict"),j=c("requireDeferred")("MessengerWellbeingUnrestrictFailedFalcoEvent").__setRef("useMWLSMessengerRestrict"),k=c("requireDeferred")("MessengerWellbeingUnrestrictSucceededFalcoEvent").__setRef("useMWLSMessengerRestrict");function l(a,b,e,f,g,h){var j=e!=null?d("LSMessagingThreadTypeUtil").isSecure(e.threadType):!1;e=e!=null?d("I64").equal(e.threadType,d("LSIntEnum").ofNumber(15)):!1;var l=e?17:1;d("I64").equal(a,d("LSIntEnum").ofNumber(c("LSContactMessengerRestrictAction").UNRESTRICT))?k.onReady(function(a){return a.log(function(){return{data:{entry_point:h,request_id:g,source:l,source_owner:0,source_type:0},other_user:{id:d("I64").to_string(b)},thread:{id:j?"-1":d("I64").to_string(f)}}})}):i.onReady(function(a){return a.log(function(){return{data:{entry_point:h,request_id:g,source:l,source_owner:0,source_type:0},other_user:{id:d("I64").to_string(b)},thread:{id:j?"-1":d("I64").to_string(f)}}})})}function m(a,b,e,f,g,i){var k=e!=null?d("LSMessagingThreadTypeUtil").isSecure(e.threadType):!1;e=e!=null?d("I64").equal(e.threadType,d("LSIntEnum").ofNumber(15)):!1;var l=e?17:1;d("I64").equal(a,d("LSIntEnum").ofNumber(c("LSContactMessengerRestrictAction").UNRESTRICT))?j.onReady(function(a){return a.log(function(){return{data:{entry_point:i,request_id:g,source:l,source_owner:0,source_type:0},other_user:{id:d("I64").to_string(b)},thread:{id:k?"-1":d("I64").to_string(f)}}})}):h.onReady(function(a){return a.log(function(){return{data:{entry_point:i,request_id:g,source:l,source_owner:0,source_type:0},other_user:{id:d("I64").to_string(b)},thread:{id:k?"-1":d("I64").to_string(f)}}})})}function a(a,e,f,g,h){var i=c("useReStore")(),j=b("cr:3900")==null?void 0:b("cr:3900").useHook(),k=c("useMWMessengerResetBlockOrRestrictWC")();return d("Int64Hooks").useCallbackInt64(function(b){c("promiseDone")(i.runInTransaction(function(d){return c("LSSetMessengerRestrict")(a,b,g,c("LSFactory")(d))},"readwrite"),function(){j==null?void 0:j(a,b);k(a);return l(b,a,e,f,g,h)},function(){return m(b,a,e,f,g,h)})},[i,a,f,g,h])}g["default"]=a}),98);
__d("useMWRestrictContactOneOnOneThread",["CurrentEnvironment","I64","LSContactMessengerRestrictAction","LSIntEnum","LSMessagingThreadTypeUtil","MWChatStateActions","MWChatStateV2.bs","MWLSThreadDisplayContext","requireDeferred","useCometRouterDispatcher","useMWLSMessengerRestrict","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("MessengerWellbeingRestrictTappedFalcoEvent").__setRef("useMWRestrictContactOneOnOneThread"),i=c("requireDeferred")("MessengerWellbeingUnrestrictTappedFalcoEvent").__setRef("useMWRestrictContactOneOnOneThread");function j(a,b,c,e,f,g){var j=e!=null?d("LSMessagingThreadTypeUtil").isSecure(e.threadType):!1;e=e!=null?d("I64").equal(e.threadType,d("LSIntEnum").ofNumber(15)):!1;var k=e?17:1;a?i.onReady(function(a){return a.log(function(){return{data:{entry_point:g,request_id:b,source:k,source_owner:0,source_type:0},other_user:{id:d("I64").to_string(c)},thread:{id:j?"-1":d("I64").to_string(f)}}})}):h.onReady(function(a){return a.log(function(){return{data:{entry_point:g,request_id:b,source:k,source_owner:0,source_type:0},other_user:{id:d("I64").to_string(c)},thread:{id:j?"-1":d("I64").to_string(f)}}})})}function a(a,b,e,f,g){var h=c("uuidv4")(),i=c("useMWLSMessengerRestrict")(a,b,e,h,f),k=c("useCometRouterDispatcher")(),l=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext(),m=d("MWChatStateV2.bs").useDispatch();return function(){j(g,h,a,b,e,f);i(g?d("LSIntEnum").ofNumber(c("LSContactMessengerRestrictAction").UNRESTRICT):d("LSIntEnum").ofNumber(c("LSContactMessengerRestrictAction").RESTRICT));!g&&l==="Inbox"&&k!=null&&k.go(c("CurrentEnvironment").messengerdotcom?"/":"/messages",{});if(!g)return m(d("MWChatStateActions").closeTabByThreadKey(Date.now(),e))}}g["default"]=a}),98);
__d("MWInboxInfoMessengerRestrict.react",["fbt","ix","I64","LSContactBitOffset","LSContactMessengerRestrictAction","LSIntEnum","MAWInboxInfoButton.react","MWInboxInfoPrivacyAndSupportSectionIcons","MWRestrictDialogActionToggle.react","MWXIcon.react","MWXMenuItem.react","ReQL","ReQLSuspense","TetraButton.react","fbicon","react","useMWRestrictContactOneOnOneThread","useReStore"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=d("react");function k(a){var b=a.buttonSource,e=a.buttonTitle,f=a.isPendingState;a=a.onPress;switch(b){case"CHAT_TAB_SETTINGS":return j.jsx(c("MWXMenuItem.react"),{disabled:f,icon:d("fbicon")._(i("995804"),20),onClick:a,primaryText:e,testid:void 0});case"RESTRICT_COMPOSER":return j.jsx(c("TetraButton.react"),{disabled:f,label:e,onPress:a,type:"secondary"});default:return j.jsx(c("MAWInboxInfoButton.react"),{addOnStart:j.jsx(c("MWXIcon.react"),{icon:f?c("MWInboxInfoPrivacyAndSupportSectionIcons").RestrictMessagesPendingState:c("MWInboxInfoPrivacyAndSupportSectionIcons").RestrictMessages}),disabled:f,label:e,onPress:a,testid:void 0})}}k.displayName=k.name+" [from "+f.id+"]";function a(a){var b,e=a.buttonSource,g=a.contactId,i=a.loggingEntryPoint,l=a.thread;a=a.threadKey;var m=c("useReStore")(),n=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(m.table("contacts")).getKeyRange(g)},[g,m],f.id+":105"),o=n!=null?d("LSContactBitOffset").has(d("LSIntEnum").ofNumber(66),n):!1;b=(b=n==null?void 0:n.pendingMessengerRestrictAction)!=null?b:d("I64").of_string("10");var p=d("I64").equal(b,d("LSIntEnum").ofNumber(c("LSContactMessengerRestrictAction").RESTRICT))||d("I64").equal(b,d("LSIntEnum").ofNumber(c("LSContactMessengerRestrictAction").UNRESTRICT)),q=e==="RESTRICT_COMPOSER"?h._("__JHASH__YZSK15am9Ug__JHASH__"):o?h._("__JHASH__NHBatIuQaK9__JHASH__"):h._("__JHASH__ttAO1drM5D3__JHASH__");b=d("I64").equal(b,d("LSIntEnum").ofNumber(c("LSContactMessengerRestrictAction").UNRESTRICT))?h._("__JHASH___WXinC0t7Ah__JHASH__"):h._("__JHASH__9a46dloGnuc__JHASH__");l=c("useMWRestrictContactOneOnOneThread")(g,l,a,i,o);var r=p?b:q;if(n!=null)return j.jsx(c("MWRestrictDialogActionToggle.react"),{dialogProps:{isRestricted:o,onPress:l,restrictedUser:n},children:function(a){return j.jsx(k,{buttonSource:e,buttonTitle:r,isPendingState:p,onPress:a})}});else return null}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MessengerRestrictButtonSource.bs",[],(function(a,b,c,d,e,f){"use strict";a="THREAD_DETAIL_SETTINGS";b="RESTRICT_COMPOSER";c="CHAT_TAB_SETTINGS";f.thread_detail_settings=a;f.restrict_composer=b;f.chat_tab_settings=c}),66);
__d("MWCMBotStrings",["fbt"],(function(a,b,c,d,e,f,g,h){"use strict";a=h._("__JHASH__K0E4NNoKNtJ__JHASH__");b=h._("__JHASH__sbctGC-UNw4__JHASH__");g.addedToChatLegend=a;g.notAddedToChatLegend=b}),98);
__d("MWV2EditPhotoUploader.bs",["fbt","CometFileSelector.react","DTSG","Int64Hooks","LSFactory","LSUpdateThreadImage","Promise","cometAsyncFetch","cometPushToast","promiseDone","react","recoverableViolation","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");h._("__JHASH__K4v4HWgVO3X__JHASH__");function a(a){var e=a.children,f=a.thread,g=c("useReStore")(),h=d("Int64Hooks").useCallbackInt64(function(a,b){var d=g.runInTransaction(function(d){var e;return c("LSUpdateThreadImage")(f.threadKey,a,(e=b)!=null?e:void 0,void 0,void 0,c("LSFactory")(d))},"readwrite");c("promiseDone")(d)},[g,f.threadKey]),j=function(){d("cometPushToast").cometPushErrorToast({message:"Unable to set group picture"})};a=function(a){a=a.item(0);if(a==null){c("recoverableViolation")("file input onChange without any files?","messenger");return j()}var e=new FormData();e.set("images_only",!0);e.set("fb_dtsg",d("DTSG").getToken());e.set("attachment[]",a,a.name);a=c("cometAsyncFetch")("/ajax/mercury/upload.php",{data:{},formData:e,method:"POST"}).then(function(a){a=a.metadata[0];a=a!=null?[a.image_id,a.src]:void 0;a!=null?h(a[0],a[1]):j();return b("Promise").resolve()})["catch"](function(a){j();c("recoverableViolation")(a.toString(),"messenger");return b("Promise").resolve()});c("promiseDone")(a)};return i.jsx(c("CometFileSelector.react"),{accept:[".jpg",".png",".jpeg",".bmp",".tif",".tiff"],onFilesSelected:a,children:e})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWColorWheelIcon.bs",["CometSVGIcon.react","I64","MWPColorUtils","MWPThreadTheme.bs","gkx","react","useCometUniqueID","useSetAttributeRef"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=c("gkx")("571")?"24":"20",j=c("gkx")("571")?"8":"10";function a(){var a=d("MWPThreadTheme.bs").useHook(),b=a.threadTheme,e=[].concat(a.outgoingGradientColors).sort(function(a,b){return d("I64").compare(a.gradientIndex,b.gradientIndex)}).map(function(a){return d("MWPColorUtils").int64ToHex(a.color)});e.length===0&&e.push(d("MWPColorUtils").int64ToHex(b.fallbackColor));e.length===1&&e.push(e[0]);a=h.jsx("linearGradient",{gradientTransform:"rotate(90)",children:e.map(function(a,b){var c=100/(e.length-1);c=String(Math.imul(b,c))+"%";return h.jsx("stop",{offset:c,stopColor:a},String(b))})});var f=c("useCometUniqueID")(),g=c("useSetAttributeRef")("id",f);f=c("useSetAttributeRef")("mask","url(#"+f+")");b="mw_edit_theme_svg:"+b.accessibilityLabel;return h.jsxs(c("CometSVGIcon.react"),{color:a,"data-testid":void 0,size:i,viewBox:"0 0 20 20",children:[h.jsx("defs",{children:h.jsxs("mask",{ref:g,children:[h.jsx("rect",{fill:"white",height:"100%",width:"100%"}),h.jsx("circle",{cx:"10",cy:"10",fill:"black",r:"3"})]})}),h.jsx("circle",{cx:"10",cy:"10",r:j,ref:f})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useMAWIsEphemeralSettingEnabled",["I64","LSContactBitOffset","LSContactBlockedByViewerStatus","LSIntEnum","LSMessagingThreadTypeUtil","MAWMessageRequestUtil.bs","MWPActor.react","ReQL","ReQLSuspense","useReStore"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b,e=d("MWPActor.react").useActor(),g=c("useReStore")(),h=d("ReQLSuspense").useFirst(function(){if(d("LSMessagingThreadTypeUtil").isOneToOne(a.threadType)&&d("LSMessagingThreadTypeUtil").isSecure(a.threadType))return d("ReQL").mergeJoin(d("ReQL").fromTableAscending(g.table("participants")).getKeyRange(a.threadKey),d("ReQL").fromTableAscending(g.table("contacts"))).filter(function(a){a=a[1];return!d("I64").equal(a.id,e)}).map(function(a){a=a[1];return a});else return d("ReQL").empty()},[a.threadType,a.threadKey,g,e],f.id+":32");if(h==null)return!1;b=(b=d("LSContactBitOffset").has(d("LSIntEnum").ofNumber(64),h))!=null?b:!1;var i=d("I64").equal(h.blockedByViewerStatus,d("LSIntEnum").ofNumber(c("LSContactBlockedByViewerStatus").UNBLOCKED));h=d("MAWMessageRequestUtil.bs").isMessageRequestV2(a,h);return!h&&!b&&i}g["default"]=a}),98);
__d("LsIgnoreTappedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("707");b=d("FalcoLoggerInternal").create("ls_ignore_tapped",a);e=b;g["default"]=e}),98);
__d("CommunityBotEnabledStatus",[],(function(a,b,c,d,e,f){a=Object.freeze({ENABLED:"ENABLED",NOT_ENABLED:"NOT_ENABLED"});f["default"]=a}),66);