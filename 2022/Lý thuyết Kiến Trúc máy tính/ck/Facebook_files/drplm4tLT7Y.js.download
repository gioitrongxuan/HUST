;/*FB_PKG_DELIM*/

__d("MWChatPhotoRootQuery.graphql",["MWChatPhotoRootQuery_facebookRelayOperation","relay-runtime"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"attachment_id"},{defaultValue:null,kind:"LocalArgument",name:"message_id"}],c=[{kind:"Variable",name:"attachment_id",variableName:"attachment_id"},{kind:"Variable",name:"message_id",variableName:"message_id"}],d={kind:"InlineFragment",selections:[{alias:null,args:[{kind:"Literal",name:"site",value:"www"}],kind:"ScalarField",name:"url",storageKey:'url(site:"www")'}],type:"MessageImage",abstractKey:null},e={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"animated_image_caption",storageKey:null}],type:"MessageAnimatedImage",abstractKey:null};return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"MWChatPhotoRootQuery",selections:[{alias:"currMedia",args:c,concreteType:null,kind:"LinkedField",name:"message_attachment",plural:!1,selections:[d,e],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"MWChatPhotoRootQuery",selections:[{alias:"currMedia",args:c,concreteType:null,kind:"LinkedField",name:"message_attachment",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},d,e,{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],type:"Node",abstractKey:"__isNode"}],storageKey:null}]},params:{id:b("MWChatPhotoRootQuery_facebookRelayOperation"),metadata:{},name:"MWChatPhotoRootQuery",operationKind:"query",text:null}}}();b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("CometMediaViewerLayoutSkeleton.react",["CometNewsfeedKeyCommandWidget","CometRouteRenderType","CometScrollView.react","CometSection.react","MWChatVisibilityOverrideContext","react","stylex","useMWShouldCurrentRouteOverrideChatVisibility","useShouldShowMessagingEntrypointOnCurrentRoute"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i={chatSliver:{backgroundColor:"x1jx94hy",boxShadow:"x13tw4yp",display:"x78zum5",end:"xds687c",height:"x5yr21d",position:"xixxii4",top:"xxzkxad",width:"x1dmp6jm","@media (max-width: 799px)_display":"xte6x5b",$$css:!0},container:{display:"x78zum5",height:"x5yr21d",minWidth:"x1oef4wy",$$css:!0},contentArea:{flexGrow:"x1iyjqo2",minHeight:"x1t2pt76",minWidth:"x1gvwcb",position:"x1n2onr6",$$css:!0},leftRail:{backgroundColor:"x2bj2ny",display:"x1s85apg",flexShrink:"x2lah0s",height:"x5yr21d",width:"x1cvmir6","@media (min-width: 1260px)_display":"x1klv6iw",$$css:!0},leftRailContainer:{backgroundColor:"x2bj2ny",bottom:"x1ey2m1c",fontSize:"x1nxh6w3",height:"x5yr21d",overflowY:"x1odjw0f",position:"x1n2onr6",width:"xh8yej3",$$css:!0},leftRailWithoutRightRail:{"@media (min-width: 900px)_display":"x1dv45df",$$css:!0},rightRail:{backgroundColor:"x2bj2ny",display:"x78zum5",flexShrink:"x2lah0s",minHeight:"x1t2pt76",position:"x1n2onr6",width:"x1cvmir6",$$css:!0},rightRailContainer:{display:"x78zum5",flexDirection:"xdt5ytf",maxHeight:"xnjgh8c",minHeight:"x1w9j2z8",position:"xixxii4",top:"xxzkxad",width:"x1cvmir6","@media (max-width: 719px)_position":"xjabf5u",$$css:!0},rightRailWithChat:{width:"x1peuizl",$$css:!0},rightRailWithoutLeftRail:{"@media (min-width: 900px)_display":"x1dv45df",$$css:!0},shadowBar:{boxShadow:"xr9p91e",end:"xds687c",height:"x1s65kcs",pointerEvents:"x47corl",position:"x10l6tqk",start:"x17qophe",top:"x13vifvy",$$css:!0}};function a(a){var b=a.children,e=a.leftRail;e=e===void 0?null:e;a=a.rightRail;a=a===void 0?null:a;var f=d("CometRouteRenderType").useIsPushView(),g=c("useMWShouldCurrentRouteOverrideChatVisibility")(),j=c("useShouldShowMessagingEntrypointOnCurrentRoute")("CHAT");g=d("MWChatVisibilityOverrideContext").useMWChatVisibilityOverride(g);j=j&&g;return h.jsxs(c("CometNewsfeedKeyCommandWidget").Wrapper,{xstyle:i.container,children:[e!=null?h.jsxs("div",{className:c("stylex")(i.leftRail,a==null&&i.leftRailWithoutRightRail),children:[h.jsx(c("CometSection.react"),{className:"x2bj2ny x1ey2m1c x1nxh6w3 x5yr21d x1odjw0f x1n2onr6 xh8yej3",children:e}),f?h.jsx("div",{className:"xr9p91e xds687c x1s65kcs x47corl x10l6tqk x17qophe x13vifvy"}):null]}):null,h.jsx("div",{className:"x1iyjqo2 x1t2pt76 x1gvwcb x1n2onr6",children:b}),a!=null?h.jsxs("div",{className:c("stylex")(i.rightRail,j&&i.rightRailWithChat,e==null&&i.rightRailWithoutLeftRail),children:[h.jsx(c("CometSection.react"),{className:"x78zum5 xdt5ytf xnjgh8c x1w9j2z8 xixxii4 xxzkxad x1cvmir6 xjabf5u",children:h.jsx(c("CometScrollView.react"),{showsHorizontalScrollIndicator:!1,children:a})}),j?h.jsx("div",{className:"x1jx94hy x13tw4yp x78zum5 xds687c x5yr21d xixxii4 xxzkxad x1dmp6jm xte6x5b"}):null,f?h.jsx("div",{className:"xr9p91e xds687c x1s65kcs x47corl x10l6tqk x17qophe x13vifvy"}):null]}):null]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("messengerWebMediaViewerPrefetch",["CometRelay","promiseDone","relay-runtime"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,e){b=d("relay-runtime").createOperationDescriptor(d("relay-runtime").getRequest(a),b);var f=e.check(b)==="available";f||c("promiseDone")(d("CometRelay").fetchQuery(e,a,b.request.variables).toPromise())}g["default"]=a}),98);
__d("MWChatPhotoRoot.react",["CometContentNotAvailable.react","CometImage.react","CometMediaViewerLayoutSkeleton.react","CometMediaViewerStage.react","CometPhotoViewerInnerWrapper.react","CometPlaceholder.react","CometRelay","CometRouteParams","CometRouteRenderType","CometTrackingNodeProvider.react","MWChatDeleteMessageEventEmitter","MWChatPhotoRootQuery.graphql","XCometMessengerPhotoControllerRouteBuilder","messengerWebMediaViewerPrefetch","react","unrecoverableViolation","useCometRouterDispatcher","useRoutePassthroughProps"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("react"),j=d("react").useEffect,k=h!==void 0?h:h=b("MWChatPhotoRootQuery.graphql");function l(a){var b,e=a.currentPhotoID,f=a.messageID,g=a.messengerPhotoRootQueryReference,h=a.photoIDs;a=d("CometRelay").usePreloadedQuery(k,g);g=d("CometPhotoViewerInnerWrapper.react").useCometPhotoViewerContainerStyles();var j=(a==null?void 0:(b=a.currMedia)==null?void 0:b.url)||(a==null?void 0:(b=a.currMedia)==null?void 0:(b=b.image)==null?void 0:b.uri),l=a==null?void 0:(b=a.currMedia)==null?void 0:b.animated_image_caption;a=null;b=null;var m=function(a){return a!=null?c("XCometMessengerPhotoControllerRouteBuilder").buildURL({fbid:a,message_id:f,photo_ids:h}):null};if(Array.isArray(h)&&h.length>0){var n=h.findIndex(function(a){return a===e});n!==-1&&(a=n-1>-1?m(h[n-1]):null,b=n+1<h.length?m(h[n+1]):null)}return j!=null?i.jsx(c("CometMediaViewerLayoutSkeleton.react"),{children:i.jsx(c("CometMediaViewerStage.react"),{nextMediaURI:b,prevMediaURI:a,children:i.jsx("div",{className:g,children:i.jsx(d("CometPhotoViewerInnerWrapper.react").CometPhotoViewerImageWrapper,{imageComponentWithXStyle:function(a){return i.jsx(c("CometImage.react"),{alt:l!=null?l:void 0,src:j,testid:void 0,xstyle:a},j)}})})})}):i.jsx(c("CometMediaViewerLayoutSkeleton.react"),{children:i.jsx(c("CometMediaViewerStage.react"),{nextMediaURI:b,prevMediaURI:a,children:i.jsx("div",{className:g,children:i.jsx(c("CometContentNotAvailable.react"),{})})})})}l.displayName=l.name+" [from "+f.id+"]";function a(a){var b=d("CometRouteParams").useRouteParams(),e=c("useRoutePassthroughProps")(),f=c("useCometRouterDispatcher")(),g=d("CometRouteRenderType").useIsPushView();e=(e==null?void 0:e.origSrc)!=null?String(e==null?void 0:e.origSrc):null;var h=b==null?void 0:b.fbid,m=[];Array.isArray(b.photo_ids)&&(m=b.photo_ids.map(function(a){return String(a)}));var n=b==null?void 0:b.message_id,o=d("CometRelay").useRelayEnvironment();j(function(){Array.isArray(b.photo_ids)&&b.photo_ids.forEach(function(a){a!=null&&c("messengerWebMediaViewerPrefetch")(k,{attachment_id:String(a),message_id:String(n)},o)})},[o,b.photo_ids,n]);if(h==null||typeof h!=="string")throw c("unrecoverableViolation")("Invalid fbid parameter","comet_ui");if(n==null||typeof n!=="string")throw c("unrecoverableViolation")("Invalid messageID parameter","messenger_web_product");j(function(){return d("MWChatDeleteMessageEventEmitter").subscribe(function(a){a===n&&o.commitUpdate(function(a){var c=a.getRoot();if(c==null)return;Array.isArray(b.photo_ids)?b.photo_ids.forEach(function(a){c.setValue(null,"message_attachment",{attachment_id:a,message_id:n})}):c.setValue(null,"message_attachment",{attachment_id:h,message_id:n});f!=null&&g&&f.popPushView()})})},[o,g,n,h,b.photo_ids,f]);return i.jsx(c("CometTrackingNodeProvider.react"),{trackingNode:82,children:i.jsx(c("CometPlaceholder.react"),{fallback:i.jsx(c("CometMediaViewerLayoutSkeleton.react"),{children:i.jsx(c("CometMediaViewerStage.react"),{useKeyCommands:!1,children:i.jsx(d("CometPhotoViewerInnerWrapper.react").CometPhotoViewerPlaceholderWrapper,{imageUri:e,showPlaceholderImage:e!=null})})}),children:i.jsx(l,babelHelpers["extends"]({currentPhotoID:h,messageID:n,photoIDs:m},a.queries))})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);